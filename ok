local Players = game.Players

local function createThickerTorsoRainbowOutline(player)
    local character = player.Character
    local localPlayer = Players.LocalPlayer

    if character and player ~= localPlayer and player.Team ~= localPlayer.Team then
        local torso = character:WaitForChild("HumanoidRootPart")
        local billboardGui = Instance.new("BillboardGui")
        billboardGui.Adornee = torso
        billboardGui.Size = UDim2.new(1, 0, 2, 0)
        billboardGui.StudsOffset = Vector3.new(0, 2, 0)
        billboardGui.AlwaysOnTop = true


        local thickerRainbowOutline = Instance.new("Frame")
        thickerRainbowOutline.Size = UDim2.new(1, 15, 1, 15)
        thickerRainbowOutline.Position = UDim2.new(-0.5, 0, -1, 0) 
        thickerRainbowOutline.BackgroundTransparency = 0
        thickerRainbowOutline.BackgroundColor3 = Color3.fromHSV(math.random(), 1, 1)
        thickerRainbowOutline.Parent = billboardGui
        local function updateColor()
            thickerRainbowOutline.BackgroundColor3 = Color3.fromHSV(tick() % 5 / 5, 1, 1)
        end
        spawn(function()
            while thickerRainbowOutline.Parent do
                updateColor()
                wait(30)
            end
        end)

        billboardGui.Parent = torso
    end
end
for _, player in pairs(Players:GetPlayers()) do
    createThickerTorsoRainbowOutline(player)
end
Players.PlayerAdded:Connect(function(player)
    createThickerTorsoRainbowOutline(player)
end)


Players.PlayerRemoving:Connect(function(player)
    local character = player.Character
    if character then
        local torso = character:FindFirstChild("HumanoidRootPart")
        if torso then
            local billboardGui = torso:FindFirstChild("BillboardGui")
            if billboardGui then
                billboardGui:Destroy()
            end
        end
    end
